{"ast":null,"code":"import _slicedToArray from\"/Users/liuyu/Desktop/first-last-project3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect}from\"react\";import axios from\"axios\";import Axios from\"axios\";import{useParams}from\"react-router\";import{useState}from\"react\";import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import Col from'react-bootstrap/Col';import'./UserDetails.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserDetails(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newComment=_useState6[0],setNewComment=_useState6[1];var params=useParams();var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isError=_useState10[0],setIsError=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),status=_useState12[0],setStatus=_useState12[1];var username=params.username;function onDescriptionInput(e){var des=e.target.value;setDescription(des);//console.log(des);\n}function onCommentInput(e){var com=e.target.value;setNewComment(com);}function getStatus(){axios.get('/app/status/user/'+username+'/').then(function(response){//console.log(response.data);\nvar data=response.data[0];//console.log(pokemonId);\nif(data.username===undefined){setIsError(true);}else{setStatus(data);}}).catch(function(error){setIsError(true);}).finally(function(){setIsLoading(false);});}function getUser(){axios.get('/app/user/'+username+'/').then(function(response){setUser(response.data[0]);}).catch(function(error){setIsError(true);}).finally(function(){setIsLoading(false);});}function Modify(){Axios.post('/app/user/'+username+'/'+description+'/').then(function(response){getUser();}).finally(function(){setNewComment('');});}function AddComment(){Axios.post('/app/status/user/'+username+'/'+newComment+'/').then(function(response){getStatus();}).finally(function(){setNewComment('');});}function deleteComment(comment){var oldComment=comment.target.value;console.log(comment.target.value);Axios.post('/app/status/delete/'+username+'/'+oldComment+'/').then(function(response){getStatus();});}useEffect(function(){getUser();getStatus();});if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}var out=[];var comments=status.comment;if(comments===undefined){comments=[];}// console.log(status);\n// console.log(comments);\n// console.log(comments === undefined);\n// if (comments === undefined){\n//     setIsError(true);\n// }\nif(!isError){for(var i=comments.length-1;i>=0;i--){var out_comment=[/*#__PURE__*/_jsx(\"li\",{className:\"ele\",children:comments[i]}),/*#__PURE__*/_jsx(Button,{onClick:deleteComment,value:comments[i],children:\"delete\"})];out.push(out_comment);}}//let des = user.description;\n//const des = user.description\n//const [description,setDescription] = useState(des);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"use\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"User\",children:user.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Des\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Description:\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"des\",children:user.description})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"b\",{children:\"New description:\"})}),/*#__PURE__*/_jsx(Col,{sm:\"5\",children:/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",value:description,onInput:onDescriptionInput})})]})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:Modify,className:\"button\",children:\"Modify\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{className:\"com\",children:\"Comments:\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{children:out})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"b\",{children:\"New Comments:\"})}),/*#__PURE__*/_jsx(Col,{sm:\"5\",children:/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",value:newComment,onInput:onCommentInput})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",children:/*#__PURE__*/_jsx(Button,{onClick:AddComment,children:\"Add\"})})]});}","map":{"version":3,"names":["React","useEffect","axios","Axios","useParams","useState","Button","Form","Col","UserDetails","user","setUser","description","setDescription","newComment","setNewComment","params","isLoading","setIsLoading","isError","setIsError","status","setStatus","username","onDescriptionInput","e","des","target","value","onCommentInput","com","getStatus","get","then","response","data","undefined","catch","error","finally","getUser","Modify","post","AddComment","deleteComment","comment","oldComment","console","log","out","comments","i","length","out_comment","push","name"],"sources":["/Users/liuyu/Desktop/first-last-project3/src/status/UserDetails.jsx"],"sourcesContent":["\n\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport axios from \"axios\";\nimport Axios from \"axios\";\nimport { useParams } from \"react-router\";\nimport { useState } from \"react\";\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport './UserDetails.css'\nexport default function UserDetails(){\n    const [user,setUser] = useState({});\n    const [description,setDescription] = useState('');\n    const [newComment,setNewComment] = useState('');\n    const params = useParams();\n    const [isLoading, setIsLoading] = useState(true);\n    const [isError, setIsError] = useState(false);\n    const [status,setStatus] = useState({});\n    const username = params.username;\n    function onDescriptionInput(e) {\n        const des = e.target.value;\n        setDescription(des);\n        //console.log(des);\n    }\n    function onCommentInput(e){\n        const com = e.target.value;\n        setNewComment(com);\n    }\n    function getStatus(){\n        axios.get('/app/status/user/' + username + '/')\n        .then(function(response){\n            //console.log(response.data);\n            const data = response.data[0];\n           //console.log(pokemonId);\n           if (data.username === undefined){\n            setIsError(true);\n           }\n           else{\n            setStatus(data);\n           }\n            \n         })\n         .catch(function(error){\n            setIsError(true);\n        })\n        .finally(function(){\n            \n            setIsLoading(false);\n        })\n    }\n    function getUser(){\n        axios.get('/app/user/' + username +'/')\n        .then(function(response){\n            setUser(response.data[0]);\n        })\n        .catch(function(error){\n            setIsError(true);\n        })\n        .finally(function(){\n            setIsLoading(false);\n        })\n    }\n    function Modify() {\n        Axios.post('/app/user/' + username + '/' +  description +'/')\n            .then(function(response) {\n                getUser();\n            })\n            .finally(function() {\n                setNewComment('');\n            });\n    }\n    function AddComment(){\n        Axios.post('/app/status/user/' + username + '/' +  newComment +'/')\n            .then(function(response) {\n                getStatus();\n            })\n            .finally(function() {\n                setNewComment('');\n            });\n    }\n    function deleteComment(comment){\n        const oldComment = comment.target.value;\n        console.log(comment.target.value);\n        Axios.post('/app/status/delete/' + username + '/' +  oldComment +'/')\n            .then(function(response) {\n                getStatus();\n            })\n\n    }\n    useEffect(function(){ \n        getUser();\n        getStatus();\n\n    });\n    \n    if (isLoading){\n        return (<div>Loading...</div>)\n    }\n    const out = [];\n    let comments = status.comment;\n    if (comments === undefined){\n        comments = [];\n    }\n    // console.log(status);\n    // console.log(comments);\n    // console.log(comments === undefined);\n    // if (comments === undefined){\n    //     setIsError(true);\n    // }\n    if (!isError){\n        \n    \n        for(let i = comments.length-1; i >=0; i--){\n        const out_comment = [<li className=\"ele\">\n          {comments[i]}\n       </li>,\n       <Button onClick={deleteComment} value={comments[i]} >delete</Button>]\n        out.push(out_comment);\n        }\n    }\n    //let des = user.description;\n    //const des = user.description\n    //const [description,setDescription] = useState(des);\n    return(<div className=\"use\">\n        <div><h1 className=\"User\">{user.name}</h1></div>\n            <div className=\"Des\">\n            <div><h3>Description:</h3></div>\n            <div>\n                <p className=\"des\">{user.description}</p>\n            </div>\n            </div>\n            <div>\n                <Form>\n                <Form.Group>\n                    <Form.Label ><b>New description:</b></Form.Label>\n                    <Col sm='5'>\n                    <Form.Control as=\"textarea\" value={description} onInput={onDescriptionInput} /></Col>\n                </Form.Group>\n               \n                </Form>\n            </div>\n            <div>\n            <Button variant=\"primary\" onClick={Modify} className=\"button\">Modify</Button>\n            </div>\n            <div><h3 className=\"com\">Comments:</h3></div>\n            <div>\n               <ul >{out}</ul>\n            </div>\n            <div>\n            <Form>\n                <Form.Group>\n                    <Form.Label ><b>New Comments:</b></Form.Label>\n                    <Col sm='5'>\n                    <Form.Control as=\"textarea\" value={newComment} onInput={onCommentInput} /></Col>\n                </Form.Group>\n               \n                </Form>\n                \n            </div>\n            <div className=\"button\">\n            <Button onClick = {AddComment}>Add</Button>\n            </div>\n    </div>)\n}"],"mappings":"8HAEA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,OAAO,CACjC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,cAAc,CACxC,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAOC,OAAM,KAAM,wBAAwB,CAC3C,MAAOC,KAAI,KAAM,sBAAsB,CACvC,MAAOC,IAAG,KAAM,qBAAqB,CACrC,MAAO,mBAAmB,yFAC1B,cAAe,SAASC,YAAW,EAAE,CACjC,cAAuBJ,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA5BK,IAAI,eAACC,OAAO,eACnB,eAAqCN,QAAQ,CAAC,EAAE,CAAC,yCAA1CO,WAAW,eAACC,cAAc,eACjC,eAAmCR,QAAQ,CAAC,EAAE,CAAC,yCAAxCS,UAAU,eAACC,aAAa,eAC/B,GAAMC,OAAM,CAAGZ,SAAS,EAAE,CAC1B,eAAkCC,QAAQ,CAAC,IAAI,CAAC,yCAAzCY,SAAS,eAAEC,YAAY,eAC9B,eAA8Bb,QAAQ,CAAC,KAAK,CAAC,0CAAtCc,OAAO,gBAAEC,UAAU,gBAC1B,gBAA2Bf,QAAQ,CAAC,CAAC,CAAC,CAAC,2CAAhCgB,MAAM,gBAACC,SAAS,gBACvB,GAAMC,SAAQ,CAAGP,MAAM,CAACO,QAAQ,CAChC,QAASC,mBAAkB,CAACC,CAAC,CAAE,CAC3B,GAAMC,IAAG,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAC1Bf,cAAc,CAACa,GAAG,CAAC,CACnB;AACJ,CACA,QAASG,eAAc,CAACJ,CAAC,CAAC,CACtB,GAAMK,IAAG,CAAGL,CAAC,CAACE,MAAM,CAACC,KAAK,CAC1Bb,aAAa,CAACe,GAAG,CAAC,CACtB,CACA,QAASC,UAAS,EAAE,CAChB7B,KAAK,CAAC8B,GAAG,CAAC,mBAAmB,CAAGT,QAAQ,CAAG,GAAG,CAAC,CAC9CU,IAAI,CAAC,SAASC,QAAQ,CAAC,CACpB;AACA,GAAMC,KAAI,CAAGD,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CAC9B;AACA,GAAIA,IAAI,CAACZ,QAAQ,GAAKa,SAAS,CAAC,CAC/BhB,UAAU,CAAC,IAAI,CAAC,CACjB,CAAC,IACG,CACHE,SAAS,CAACa,IAAI,CAAC,CAChB,CAEF,CAAC,CAAC,CACDE,KAAK,CAAC,SAASC,KAAK,CAAC,CACnBlB,UAAU,CAAC,IAAI,CAAC,CACpB,CAAC,CAAC,CACDmB,OAAO,CAAC,UAAU,CAEfrB,YAAY,CAAC,KAAK,CAAC,CACvB,CAAC,CAAC,CACN,CACA,QAASsB,QAAO,EAAE,CACdtC,KAAK,CAAC8B,GAAG,CAAC,YAAY,CAAGT,QAAQ,CAAE,GAAG,CAAC,CACtCU,IAAI,CAAC,SAASC,QAAQ,CAAC,CACpBvB,OAAO,CAACuB,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAC7B,CAAC,CAAC,CACDE,KAAK,CAAC,SAASC,KAAK,CAAC,CAClBlB,UAAU,CAAC,IAAI,CAAC,CACpB,CAAC,CAAC,CACDmB,OAAO,CAAC,UAAU,CACfrB,YAAY,CAAC,KAAK,CAAC,CACvB,CAAC,CAAC,CACN,CACA,QAASuB,OAAM,EAAG,CACdtC,KAAK,CAACuC,IAAI,CAAC,YAAY,CAAGnB,QAAQ,CAAG,GAAG,CAAIX,WAAW,CAAE,GAAG,CAAC,CACxDqB,IAAI,CAAC,SAASC,QAAQ,CAAE,CACrBM,OAAO,EAAE,CACb,CAAC,CAAC,CACDD,OAAO,CAAC,UAAW,CAChBxB,aAAa,CAAC,EAAE,CAAC,CACrB,CAAC,CAAC,CACV,CACA,QAAS4B,WAAU,EAAE,CACjBxC,KAAK,CAACuC,IAAI,CAAC,mBAAmB,CAAGnB,QAAQ,CAAG,GAAG,CAAIT,UAAU,CAAE,GAAG,CAAC,CAC9DmB,IAAI,CAAC,SAASC,QAAQ,CAAE,CACrBH,SAAS,EAAE,CACf,CAAC,CAAC,CACDQ,OAAO,CAAC,UAAW,CAChBxB,aAAa,CAAC,EAAE,CAAC,CACrB,CAAC,CAAC,CACV,CACA,QAAS6B,cAAa,CAACC,OAAO,CAAC,CAC3B,GAAMC,WAAU,CAAGD,OAAO,CAAClB,MAAM,CAACC,KAAK,CACvCmB,OAAO,CAACC,GAAG,CAACH,OAAO,CAAClB,MAAM,CAACC,KAAK,CAAC,CACjCzB,KAAK,CAACuC,IAAI,CAAC,qBAAqB,CAAGnB,QAAQ,CAAG,GAAG,CAAIuB,UAAU,CAAE,GAAG,CAAC,CAChEb,IAAI,CAAC,SAASC,QAAQ,CAAE,CACrBH,SAAS,EAAE,CACf,CAAC,CAAC,CAEV,CACA9B,SAAS,CAAC,UAAU,CAChBuC,OAAO,EAAE,CACTT,SAAS,EAAE,CAEf,CAAC,CAAC,CAEF,GAAId,SAAS,CAAC,CACV,mBAAQ,mCAAqB,CACjC,CACA,GAAMgC,IAAG,CAAG,EAAE,CACd,GAAIC,SAAQ,CAAG7B,MAAM,CAACwB,OAAO,CAC7B,GAAIK,QAAQ,GAAKd,SAAS,CAAC,CACvBc,QAAQ,CAAG,EAAE,CACjB,CACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAI,CAAC/B,OAAO,CAAC,CAGT,IAAI,GAAIgC,EAAC,CAAGD,QAAQ,CAACE,MAAM,CAAC,CAAC,CAAED,CAAC,EAAG,CAAC,CAAEA,CAAC,EAAE,CAAC,CAC1C,GAAME,YAAW,CAAG,cAAC,WAAI,SAAS,CAAC,KAAK,UACrCH,QAAQ,CAACC,CAAC,CAAC,EACV,cACL,KAAC,MAAM,EAAC,OAAO,CAAEP,aAAc,CAAC,KAAK,CAAEM,QAAQ,CAACC,CAAC,CAAE,oBAAiB,CAAC,CACpEF,GAAG,CAACK,IAAI,CAACD,WAAW,CAAC,CACrB,CACJ,CACA;AACA;AACA;AACA,mBAAO,aAAK,SAAS,CAAC,KAAK,wBACvB,kCAAK,WAAI,SAAS,CAAC,MAAM,UAAE3C,IAAI,CAAC6C,IAAI,EAAM,EAAM,cAC5C,aAAK,SAAS,CAAC,KAAK,wBACpB,kCAAK,oCAAqB,EAAM,cAChC,kCACI,UAAG,SAAS,CAAC,KAAK,UAAE7C,IAAI,CAACE,WAAW,EAAK,EACvC,GACA,cACN,kCACI,KAAC,IAAI,wBACL,MAAC,IAAI,CAAC,KAAK,yBACP,KAAC,IAAI,CAAC,KAAK,wBAAE,uCAAuB,EAAa,cACjD,KAAC,GAAG,EAAC,EAAE,CAAC,GAAG,uBACX,KAAC,IAAI,CAAC,OAAO,EAAC,EAAE,CAAC,UAAU,CAAC,KAAK,CAAEA,WAAY,CAAC,OAAO,CAAEY,kBAAmB,EAAG,EAAM,GAC5E,EAEN,EACL,cACN,kCACA,KAAC,MAAM,EAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAEiB,MAAO,CAAC,SAAS,CAAC,QAAQ,oBAAgB,EACvE,cACN,kCAAK,WAAI,SAAS,CAAC,KAAK,uBAAe,EAAM,cAC7C,kCACG,oBAAMQ,GAAG,EAAM,EACZ,cACN,kCACA,KAAC,IAAI,wBACD,MAAC,IAAI,CAAC,KAAK,yBACP,KAAC,IAAI,CAAC,KAAK,wBAAE,oCAAoB,EAAa,cAC9C,KAAC,GAAG,EAAC,EAAE,CAAC,GAAG,uBACX,KAAC,IAAI,CAAC,OAAO,EAAC,EAAE,CAAC,UAAU,CAAC,KAAK,CAAEnC,UAAW,CAAC,OAAO,CAAEe,cAAe,EAAG,EAAM,GACvE,EAEN,EAEL,cACN,YAAK,SAAS,CAAC,QAAQ,uBACvB,KAAC,MAAM,EAAC,OAAO,CAAIc,UAAW,iBAAa,EACrC,GACR,CACV"},"metadata":{},"sourceType":"module","externalDependencies":[]}